<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CliArgs.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">code-coverage-report</a> &gt; <a href="index.source.html" class="el_package">io.gitlab.arturbosch.detekt.cli</a> &gt; <span class="el_source">CliArgs.kt</span></div><h1>CliArgs.kt</h1><pre class="source lang-java linenums">package io.gitlab.arturbosch.detekt.cli

import com.beust.jcommander.Parameter
import com.beust.jcommander.converters.PathConverter
import io.github.detekt.tooling.api.AnalysisMode
import io.github.detekt.tooling.api.spec.RulesSpec
import io.github.detekt.tooling.api.spec.RulesSpec.FailurePolicy.FailOnSeverity
import io.github.detekt.tooling.api.spec.RulesSpec.FailurePolicy.NeverFail
import org.jetbrains.kotlin.config.ApiVersion
import org.jetbrains.kotlin.config.JvmTarget
import org.jetbrains.kotlin.config.LanguageVersion
import java.net.URL
import java.nio.file.Path
import kotlin.io.path.Path

<span class="fc" id="L16">class CliArgs {</span>

<span class="pc" id="L18">    @Parameter(</span>
        names = [&quot;--input&quot;, &quot;-i&quot;],
        converter = PathConverter::class,
        splitter = PathSplitter::class,
        validateValueWith = [PathValidator::class],
        description = &quot;Input paths to analyze. Multiple paths are separated by comma. If not specified the &quot; +
            &quot;current working directory is used.&quot;
    )
<span class="pc" id="L26">    var inputPaths: List&lt;Path&gt; = listOf(Path(System.getProperty(&quot;user.dir&quot;)))</span>

<span class="pc" id="L28">    @Parameter(</span>
        names = [&quot;--analysis-mode&quot;],
        description = &quot;Analysis mode used by detekt. &quot; +
            &quot;'full' analysis mode is comprehensive but requires the correct compiler options to be provided. &quot; +
            &quot;'light' analysis cannot utilise compiler information and some rules cannot be run in this mode.&quot;
    )
<span class="pc" id="L34">    var analysisMode: AnalysisMode = AnalysisMode.light</span>

<span class="pc" id="L36">    @Parameter(</span>
        names = [&quot;--includes&quot;, &quot;-in&quot;],
        description = &quot;Globbing patterns describing paths to include in the analysis. &quot; +
            &quot;Useful in combination with 'excludes' patterns.&quot;
    )
<span class="nc" id="L41">    var includes: String? = null</span>

<span class="pc" id="L43">    @Parameter(</span>
        names = [&quot;--excludes&quot;, &quot;-ex&quot;],
        description = &quot;Globbing patterns describing paths to exclude from the analysis.&quot;
    )
<span class="nc" id="L47">    var excludes: String? = null</span>

<span class="pc" id="L49">    @Parameter(</span>
        names = [&quot;--config&quot;, &quot;-c&quot;],
        converter = PathConverter::class,
        splitter = PathSplitter::class,
        validateValueWith = [PathValidator::class],
        description = &quot;Path to the config file (path/to/config.yml). &quot; +
            &quot;Multiple configuration files can be specified with ',' or ';' as separator.&quot;
    )
<span class="pc" id="L57">    var config: List&lt;Path&gt; = emptyList()</span>

<span class="pc" id="L59">    @Parameter(</span>
        names = [&quot;--config-resource&quot;, &quot;-cr&quot;],
        converter = ClasspathResourceConverter::class,
        splitter = PathSplitter::class,
        description = &quot;Path to the config resource on detekt's classpath (path/to/config.yml).&quot;
    )
<span class="pc" id="L65">    var configResource: List&lt;URL&gt; = emptyList()</span>

<span class="pc" id="L67">    @Parameter(</span>
        names = [&quot;--generate-config&quot;, &quot;-gc&quot;],
        description = &quot;Export default config to the provided path.&quot;,
        converter = PathConverter::class,
    )
<span class="nc" id="L72">    var generateConfig: Path? = null</span>

<span class="pc" id="L74">    @Parameter(</span>
        names = [&quot;--plugins&quot;, &quot;-p&quot;],
        converter = PathConverter::class,
        splitter = PathSplitter::class,
        validateValueWith = [PathValidator::class],
        description = &quot;Extra paths to plugin jars separated by ',' or ';'.&quot;
    )
<span class="pc" id="L81">    var plugins: List&lt;Path&gt; = emptyList()</span>

<span class="pc" id="L83">    @Parameter(</span>
        names = [&quot;--parallel&quot;],
        description = &quot;Enables parallel compilation and analysis of source files.&quot; +
            &quot; Do some benchmarks first before enabling this flag.&quot; +
            &quot; Heuristics show performance benefits starting from 2000 lines of Kotlin code.&quot;
    )
<span class="nc" id="L89">    var parallel: Boolean = false</span>

<span class="pc" id="L91">    @Parameter(</span>
        names = [&quot;--baseline&quot;, &quot;-b&quot;],
        description = &quot;If a baseline xml file is passed in,&quot; +
            &quot; only new code smells not in the baseline are printed in the console.&quot;,
        converter = PathConverter::class
    )
<span class="nc" id="L97">    var baseline: Path? = null</span>

<span class="pc" id="L99">    @Parameter(</span>
        names = [&quot;--create-baseline&quot;, &quot;-cb&quot;],
        description = &quot;Treats current analysis findings as a smell baseline for future detekt runs.&quot;
    )
<span class="nc" id="L103">    var createBaseline: Boolean = false</span>

<span class="pc" id="L105">    @Parameter(</span>
        names = [&quot;--report&quot;, &quot;-r&quot;],
        converter = ReportPathConverter::class,
        description = &quot;Generates a report for given 'report-id' and stores it on given 'path'. &quot; +
            &quot;Entry should consist of: [report-id:path]. &quot; +
            &quot;Available 'report-id' values: 'txt', 'xml', 'html', 'md', 'sarif'. &quot; +
            &quot;These can also be used in combination with each other &quot; +
            &quot;e.g. '-r txt:reports/detekt.txt -r xml:reports/detekt.xml'&quot;
    )
<span class="pc" id="L114">    var reportPaths: List&lt;ReportPath&gt; = emptyList()</span>

<span class="nc" id="L116">    @Parameter(</span>
        names = [&quot;--fail-on-severity&quot;],
        description = &quot;Specifies the minimum severity that causes the build to fail. &quot; +
            &quot;When the value is set to 'Never' detekt will not fail regardless of the number &quot; +
            &quot;of issues and their severities.&quot;,
        converter = FailureSeverityConverter::class
    )
<span class="pc" id="L123">    var failOnSeverity: FailureSeverity = FailureSeverity.Error</span>

<span class="pc" id="L125">    @Parameter(</span>
        names = [&quot;--base-path&quot;, &quot;-bp&quot;],
        description = &quot;Specifies a directory as the base path.&quot; +
            &quot;Currently it impacts all file paths in the formatted reports. &quot; +
            &quot;File paths in console output and txt report are not affected and remain as absolute paths.&quot;,
        validateValueWith = [DirectoryValidator::class],
        converter = PathConverter::class
    )
<span class="pc" id="L133">    var basePath: Path = Path(System.getProperty(&quot;user.dir&quot;))</span>

<span class="fc" id="L135">    @Parameter(</span>
        names = [&quot;--disable-default-rulesets&quot;, &quot;-dd&quot;],
        description = &quot;Disables default rule sets.&quot;
    )
<span class="fc" id="L139">    var disableDefaultRuleSets: Boolean = false</span>

<span class="pc" id="L141">    @Parameter(</span>
        names = [&quot;--build-upon-default-config&quot;],
        description = &quot;Preconfigures detekt with a bunch of rules and some opinionated defaults for you. &quot; +
            &quot;Allows additional provided configurations to override the defaults.&quot;
    )
<span class="nc" id="L146">    var buildUponDefaultConfig: Boolean = false</span>

<span class="pc" id="L148">    @Parameter(</span>
        names = [&quot;--all-rules&quot;],
        description = &quot;Activates all available (even unstable) rules.&quot;
    )
<span class="nc" id="L152">    var allRules: Boolean = false</span>

<span class="pc" id="L154">    @Parameter(</span>
        names = [&quot;--auto-correct&quot;, &quot;-ac&quot;],
        description = &quot;Allow rules to auto correct code if they support it. &quot; +
            &quot;The default rule sets do NOT support auto correcting and won't change any line in the users code base. &quot; +
            &quot;However custom rules can be written to support auto correcting. &quot; +
            &quot;The additional 'formatting' rule set, added with '--plugins', does support it and needs this flag.&quot;
    )
<span class="nc" id="L161">    var autoCorrect: Boolean = false</span>

<span class="pc" id="L163">    @Parameter(</span>
        names = [&quot;--debug&quot;],
        description = &quot;Prints extra information about configurations and extensions.&quot;
    )
<span class="nc" id="L167">    var debug: Boolean = false</span>

<span class="pc" id="L169">    @Parameter(</span>
        names = [&quot;--help&quot;, &quot;-h&quot;],
        help = true,
        description = &quot;Shows the usage.&quot;
    )
<span class="nc" id="L174">    var help: Boolean = false</span>

<span class="pc" id="L176">    @Parameter(</span>
        names = [&quot;--run-rule&quot;],
        description = &quot;Specify a rule by [RuleSet:RuleId] pattern and run it on input.&quot;,
        hidden = true
    )
<span class="nc" id="L181">    var runRule: String? = null</span>

    /*
        The following @Parameters are used for type resolution. When additional parameters are required the
        names should mirror the names found in this file (e.g. &quot;classpath&quot;, &quot;language-version&quot;, &quot;jvm-target&quot;):
        https://github.com/JetBrains/kotlin/blob/master/compiler/cli/cli-common/src/org/jetbrains/kotlin/cli/common/arguments/K2JVMCompilerArguments.kt
     */
<span class="pc" id="L188">    @Parameter(</span>
        names = [&quot;--classpath&quot;, &quot;-cp&quot;],
        description = &quot;Paths where to find user class files and depending jar files. &quot; +
            &quot;Used for type resolution.&quot;
    )
<span class="nc" id="L193">    var classpath: String? = null</span>

<span class="pc" id="L195">    @Parameter(</span>
        names = [&quot;--api-version&quot;],
        converter = ApiVersionConverter::class,
        description = &quot;Kotlin API version used by the code under analysis. Some rules use this &quot; +
            &quot;information to provide more specific rule violation messages.&quot;
    )
<span class="nc" id="L201">    var apiVersion: ApiVersion? = null</span>

<span class="pc" id="L203">    @Parameter(</span>
        names = [&quot;--language-version&quot;],
        converter = LanguageVersionConverter::class,
        description = &quot;Compatibility mode for Kotlin language version X.Y, reports errors for all &quot; +
            &quot;language features that came out later&quot;
    )
<span class="nc" id="L209">    var languageVersion: LanguageVersion? = null</span>

<span class="pc" id="L211">    @Parameter(</span>
        names = [&quot;--jvm-target&quot;],
        converter = JvmTargetConverter::class,
        description = &quot;Target version of the generated JVM bytecode that was generated during &quot; +
            &quot;compilation and is now being used for type resolution&quot;
    )
<span class="pc" id="L217">    var jvmTarget: JvmTarget = JvmTarget.DEFAULT</span>

<span class="pc" id="L219">    @Parameter(</span>
        names = [&quot;--jdk-home&quot;],
        description = &quot;Use a custom JDK home directory to include into the classpath&quot;,
        validateValueWith = [DirectoryValidator::class],
        converter = PathConverter::class
    )
<span class="nc" id="L225">    var jdkHome: Path? = null</span>

<span class="pc" id="L227">    @Parameter(</span>
        names = [&quot;--version&quot;],
        description = &quot;Prints the detekt CLI version.&quot;
    )
<span class="nc" id="L231">    var showVersion: Boolean = false</span>

<span class="pc" id="L233">    @Parameter(description = &quot;Options to pass to the Kotlin compiler.&quot;, hidden = true)</span>
<span class="pc" id="L234">    var freeCompilerArgs: List&lt;String&gt; = mutableListOf()</span>

    val failurePolicy: RulesSpec.FailurePolicy
        get() {
<span class="fc bfc" id="L238" title="All 2 branches covered.">            return when (val minSeverity = failOnSeverity) {</span>
<span class="fc" id="L239">                FailureSeverity.Never -&gt; NeverFail</span>

                FailureSeverity.Error,
                FailureSeverity.Warning,
<span class="fc" id="L243">                FailureSeverity.Info -&gt; FailOnSeverity(minSeverity.toSeverity())</span>
            }
        }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202409090933</span></div></body></html>